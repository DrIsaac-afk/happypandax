
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Plugins &#8212; HappyPanda X 0.0.13#124 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script>
    <script type="text/javascript" src="_static/script.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="TODO" href="todo.html" />
    <link rel="prev" title="Creating frontends" href="client.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          HappyPanda X</a>
        <span class="navbar-text navbar-version pull-left"><b>0.0.13#124</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Contents <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Using HappyPanda X</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html#securing-happypanda-x">Securing HappyPanda X</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html#exposing-happypanda-x">Exposing HappyPanda X</a></li>
<li class="toctree-l1"><a class="reference internal" href="translation.html">Translations</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings.html">Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="switches.html">Command-Line Arguments</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="env.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="client.html">Creating frontends</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="todo.html">TODO</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_general.html">General</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Server API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_plugin.html">Plugin API</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="client.html" title="Previous Chapter: Creating frontends"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Creating frontends</span>
    </a>
  </li>
  <li>
    <a href="todo.html" title="Next Chapter: TODO"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">TODO &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>


<ul class="quick-links">
    <li>
        <strong>Quick links</strong>
    </li>
    <li class="quick-link">
        <a class="github-button" href="https://github.com/pewpews" aria-label="Follow @pewpews on GitHub">Follow @pewpews</a>
    </li>
    <li class="quick-link">
        <a class="github-button" href="https://github.com/pewpews/happypandax/issues" data-icon="octicon-issue-opened" data-show-count="true" aria-label="Issue pewpews/happypandax on GitHub">Issue</a>
    </li>
    <li class="divider">&middot;</li>
    <li class="quick-link">
        <a class="github-button" href="https://github.com/pewpews/happypandax" data-icon="octicon-star" data-show-count="true" aria-label="Star pewpews/happypandax on GitHub">Star</a>
    </li>
    <li class="quick-link">
        <a class="github-button" href="https://github.com/pewpews/happypandax/fork" data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork pewpews/happypandax on GitHub">Fork</a>
    </li>
    <li class="divider">&middot;</li>
    <li class="quick-link">
        <a href="https://twitter.com/pewspew"
           class="twitter-follow-button" data-width="145px"
           data-link-color="#0069D6" data-show-count="false">
            Follow
            @pewspew
        </a>
    </li>
    <li class="quick-link">
        <a href="https://twitter.com/share" class="twitter-share-button"
           data-url="" data-count="horizontal"
           data-via="twbootstrap"
           data-related="pewpews:Creator of HappyPanda X">Tweet</a>
    </li>
</ul>
<div class="container">
    <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Plugins</a><ul>
<li><a class="reference internal" href="#terminology">Terminology</a></li>
<li><a class="reference internal" href="#defining-a-plugin">Defining a plugin</a></li>
<li><a class="reference internal" href="#writing-a-plugin">Writing a plugin</a><ul>
<li><a class="reference internal" href="#interfacing-with-hpx">Interfacing with HPX</a></li>
<li><a class="reference internal" href="#logging">Logging</a></li>
<li><a class="reference internal" href="#errors">Errors</a></li>
<li><a class="reference internal" href="#debugging">Debugging</a></li>
<li><a class="reference internal" href="#about-thread-safety">About thread safety</a></li>
</ul>
</li>
<li><a class="reference internal" href="#available-packages">Available packages</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
        <div class="col-md-9 content">
            
  <div class="section" id="plugins">
<h1>Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h1>
<p>HPX is built in a way that makes it possible to step in and modify the way a functionality works or even add new ones with ease with plug-ins.</p>
<p>Plug-ins are written in <code class="docutils literal notranslate"><span class="pre">Python</span> <span class="pre">3.6</span></code>.
Note that you don’t need to be running HPX from source to develop a plug-in.</p>
<p>Here you will learn how to create a HPX plug-in and use it to extend HPX.
Before that though, here are some new terminologies to learn before diving in to help us better understand how everything is screwed together.</p>
<div class="section" id="terminology">
<h2>Terminology<a class="headerlink" href="#terminology" title="Permalink to this headline">¶</a></h2>
<p><strong>Command</strong>:</p>
<blockquote>
<div>Besides some core features that makes everything play nice together, a <strong>command</strong> is essentially what <em>a feature</em> in HPX is.
An example of a command in HPX would be <code class="docutils literal notranslate"><span class="pre">AddGallery</span></code>. This command, like its name implies, adds a gallery into HPX.
<strong>Commands</strong> can act as a building-block for other commands (used by another command) or run by itself.
Many of the functionalities provided by HPX are built up by many different <strong>commands</strong>. These commands can range from being very simple and do just one small job
to being complex and doing something big.</div></blockquote>
<p><strong>Command entry</strong>:</p>
<blockquote>
<div>This is what allows <strong>commands</strong> to be extensible. An <strong>entry</strong> allows other code to step in and run.
In plug-in terms, it’s what allows a plug-in handler to step in and run its code to either modify the process or do something else entirely.
<strong>Command entries</strong> are defined by <strong>commands</strong> and it’s up to a command when and how an <strong>entry</strong> is used.</div></blockquote>
<p><strong>Command event</strong>:</p>
<blockquote>
<div>A <strong>command event</strong> is almost like an <strong>entry</strong> with the difference that instead of modifying a process, a handler <em>reacts</em> to a process.
Like an <strong>entry</strong>, it’s up to a command when and to what an <strong>event</strong> is emitted.</div></blockquote>
</div>
<div class="section" id="defining-a-plugin">
<h2>Defining a plugin<a class="headerlink" href="#defining-a-plugin" title="Permalink to this headline">¶</a></h2>
<p>Now that we understand some basic concepts it’s time to create a plug-in.</p>
<p>HPX makes it very easy to create and write a plug-in.</p>
<p>Plug-ins are contained in their own folder, so we start by creating one for our plug-in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-/..</span>
<span class="o">-</span><span class="n">MyPlugin</span><span class="o">/</span>
</pre></div>
</div>
<p>In this folder a manifest file named <code class="docutils literal notranslate"><span class="pre">hplugin.json</span></code> (case sensitive) is required:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-/..</span>
<span class="o">-</span><span class="n">MyPlugin</span><span class="o">/</span>
    <span class="o">-</span> <span class="n">hplugin</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>A manifest file is a file describing a plug-in. Inside <code class="docutils literal notranslate"><span class="pre">hplugin.json</span></code> is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;5c17829a-eca3-46fc-9d5e-da5804fdcbf5&quot;</span><span class="p">,</span>
    <span class="s2">&quot;entry&quot;</span><span class="p">:</span> <span class="s2">&quot;main.py&quot;</span><span class="p">,</span>
    <span class="s2">&quot;shortname&quot;</span><span class="p">:</span> <span class="s2">&quot;myplugin&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;My Plugin&quot;</span><span class="p">,</span>
    <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Twiddly&quot;</span><span class="p">,</span>
    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.2b&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;A hpx plugin&quot;</span><span class="p">,</span>
    <span class="s2">&quot;test&quot;</span><span class="p">:</span> <span class="s2">&quot;test.py&quot;</span><span class="p">,</span>
    <span class="s2">&quot;website&quot;</span><span class="p">:</span> <span class="s2">&quot;www.twiddly.moe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;require&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;happypandax &gt;= 0.0.0&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">id</span></code>: A UUID4 string. Unique across all plug-ins. This attribute is required to be present.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">entry</span></code>: Path to the entry python file. Path is relative to this folder and must exist. This attribute is required to be present.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">shortname</span></code>: Your plug-in name in short form. Must be all lowercase and cannot exceed <code class="docutils literal notranslate"><span class="pre">20</span></code> characters nor contain any whitespace. This attribute is required to be present.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">name</span></code>: Name of your plug-in. This attribute is required to be present.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">author</span></code>: Name of plug-in author. This attribute is required to be present.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">version</span></code>: A string of the version of your plug-in. Must conform <span class="target" id="index-0"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0440"><strong>PEP 440</strong></a>. This attribute is required to be present.</p>
<blockquote>
<div><p>Examples of versioning that conforms <span class="target" id="index-1"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0440"><strong>PEP 440</strong></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.0</span><span class="o">.</span><span class="n">dev456</span><span class="p">,</span> <span class="mf">1.0</span><span class="n">a1</span><span class="p">,</span> <span class="mf">1.0</span><span class="n">a2</span><span class="o">.</span><span class="n">dev1</span><span class="p">,</span> <span class="mf">1.0</span><span class="n">b1</span><span class="o">.</span><span class="n">dev4</span><span class="p">,</span> <span class="mf">1.0</span><span class="n">rc1</span><span class="p">,</span> <span class="mf">1.1</span><span class="o">.</span><span class="mi">0</span><span class="n">b2</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.1</span><span class="o">.</span><span class="mi">2</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">description</span></code>: A description of your plug-in. This attribute is required to be present.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">test</span></code>: Path to the entry file for tests. Path is relative to this folder and must exist. This attribute is optional.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">website</span></code>: A url to a website for the plug-in, author, etc. This attribute is optional.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">require</span></code>: A list of strings defining other plug-ins as dependencies. This attribute is optional.</p>
<blockquote>
<div><p>A requirement must conform <span class="target" id="index-2"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0508"><strong>PEP 508</strong></a> with a few exceptions.</p>
<p>Other plug-ins can be referred by their id or shortname.</p>
<p>Examples of requirements that conforms <span class="target" id="index-3"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0508"><strong>PEP 508</strong></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;otherplugin&quot;</span><span class="p">,</span>
<span class="s2">&quot;5c17829a-eca3-46fc-9d5e-da5804fdcbf5 == 3&quot;</span><span class="p">,</span>
<span class="s2">&quot;otherplugin &lt;= 1.2&quot;</span><span class="p">,</span>
<span class="s2">&quot;otherplugin &gt;= 3&quot;</span><span class="p">,</span>
<span class="s2">&quot;otherplugin &gt;= 3.6,&lt;2&quot;</span><span class="p">,</span>
<span class="s2">&quot;otherplugin &gt;= 3; os_name==&#39;posix&#39;&quot;</span>
</pre></div>
</div>
<p>Notice the marker <code class="docutils literal notranslate"><span class="pre">os_name=='posix'</span></code> in the last example. In addition to the default markers defined in <span class="target" id="index-4"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0508"><strong>PEP 508</strong></a>, HPX defines <code class="docutils literal notranslate"><span class="pre">happypandax</span></code> or <code class="docutils literal notranslate"><span class="pre">hpx</span></code> to check against the running HPX version.
Markers can also be used freely like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;happypandax &gt;= 1.5.3&quot;</span><span class="p">,</span>
<span class="s2">&quot;platform_system == &#39;Windows&#39;&quot;</span><span class="p">,</span>
<span class="s2">&quot;otherplugin &lt; 2; platform_system==&#39;Windows&#39;&quot;</span><span class="p">,</span> <span class="c1"># only required on windows</span>
<span class="s2">&quot;otherplugin &gt; 2; platform_system==&#39;Linux&#39;&quot;</span><span class="p">,</span> <span class="c1"># only required on linux</span>
<span class="s2">&quot;otherplugin == 2; happypandax==1.2&quot;</span> <span class="c1"># only required on hpx version 1.2</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p>After creating and defining a manifest file our final plug-in folder looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-/..</span>
<span class="o">-</span><span class="n">MyPlugin</span><span class="o">/</span>
    <span class="o">-</span> <span class="n">hplugin</span><span class="o">.</span><span class="n">json</span>
    <span class="o">-</span> <span class="n">main</span><span class="o">.</span><span class="n">py</span>
    <span class="o">-</span> <span class="n">test</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>And that’s it! We can now have HPX load our plug-in. To do that, place the plug-in folder into one of the locations where HPX looks for plug-ins.
The default location is the <code class="docutils literal notranslate"><span class="pre">plugins</span></code> folder that exists inside the HPX root folder. It is also possible to define an additional location where to also look for plug-ins
through the setting <code class="docutils literal notranslate"><span class="pre">plugin.plugin_dir</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">On a MacOS HPX installation, the root HPX folder is inside the bundle at <code class="docutils literal notranslate"><span class="pre">HappyPanda</span> <span class="pre">X.app/Contents/MacOS/</span></code>.</p>
</div>
<p>After placing it in one of the locations, HPX should detect it and register it automatically either on startup or while running.</p>
</div>
<div class="section" id="writing-a-plugin">
<h2>Writing a plugin<a class="headerlink" href="#writing-a-plugin" title="Permalink to this headline">¶</a></h2>
<p>Now that we’ve defined our plug-in, we can now write the code for our plug-in.</p>
<p>Please note that no code will be run <em>before</em> the plug-in has been installed. A registered plug-in is not the same as an installed plug-in.</p>
<div class="section" id="interfacing-with-hpx">
<h3>Interfacing with HPX<a class="headerlink" href="#interfacing-with-hpx" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="logging">
<h3>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="errors">
<h3>Errors<a class="headerlink" href="#errors" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="debugging">
<h3>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="about-thread-safety">
<h3>About thread safety<a class="headerlink" href="#about-thread-safety" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="available-packages">
<h2>Available packages<a class="headerlink" href="#available-packages" title="Permalink to this headline">¶</a></h2>
</div>
</div>


        </div>
          
    </div>
</div>

<script async defer src="https://buttons.github.io/buttons.js"></script>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
      
    </p>
    <p>
        &copy; Copyright Twiddly.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>